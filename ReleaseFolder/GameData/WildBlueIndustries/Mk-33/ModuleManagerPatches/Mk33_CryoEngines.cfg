WBIPLAYMODEEXT
{
	name = Classic Stock
	modName = Mk-33
}
WBIPLAYMODEEXT
{
	name = CRP
	modName = Mk-33
}

// B9 tank defitions with zero mass effect ;)

B9_TANK_TYPE:NEEDS[CryoTanks,!ClassicStock,!WildBlueTools]
{
	name = MK33LH2O
	tankMass = 0
	tankCost = 0

	RESOURCE
	{
		name = LqdHydrogen
		unitsPerVolume = 4.995
	}
	RESOURCE
	{
		name = Oxidizer
		unitsPerVolume = 0.333
	}
}
B9_TANK_TYPE:NEEDS[CryoTanks,!WildBlueTools]
{
	name = MK33LH2
	tankMass = 0
	tankCost = 0.15

	RESOURCE
	{
		name = LqdHydrogen
		unitsPerVolume = 7.5
	}
}

// Engine
@PART[KR2200L]:NEEDS[B9PartSwitch,CryoEngines,!ClassicStock]
{
	@description ^= :$: <br><color="green">This part can change its fuel mix.</color>
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Propellant
		switcherDescription = Fuel Mix
		switcherDescriptionPlural = Fuel Mixes
		switchInFlight = True
		SUBTYPE
		{
			name = Kerolox
			title = Kerolox
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 1
			descriptionSummary = LiquidFuel + Oxidizer
			descriptionDetail = <b>Standard Mode:</b> 2200 kN @ 340 s (Vac). <br><b>Orbital Mode:</b> 220 kN @ 380 s (Vac).
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = standardThrust
				}
				DATA
				{
					PROPELLANT
					{
						name = LiquidFuel
						ratio = 0.45
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 0.55
						DrawGauge = True
					}
					atmosphereCurve
					{
						key = 0 340 -50 -73.71224
						key = 1 290 -21.23404 -21.23404
						key = 5 230 -10.54119 -10.54119
						key = 10 170 -13.59091 -13.59091
						key = 20 0.001
					}
				}
			}
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = orbitalThrust
				}
				DATA
				{
					PROPELLANT
					{
						name = LiquidFuel
						ratio = 0.45
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 0.55
						DrawGauge = True
					}
					atmosphereCurve
					{
						key = 0 380
						key = 1 324
						key = 3 0.001
					}
				}
			}
		}
		SUBTYPE
		{
			name = Hydrolox
			title = Hydrolox
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 2
			descriptionSummary = LqdHydrogen + Oxidizer
			descriptionDetail = <b>Standard Mode:</b> 2200 kN @ 418 s (Vac). <br><b>Orbital Mode:</b> 220 kN @ 465 s (Vac).
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = standardThrust
				}
				DATA
				{
					PROPELLANT
					{
						name = LqdHydrogen
						ratio = 1.5
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 0.1
						DrawGauge = True
					}
					atmosphereCurve
					{
						key = 0 418
						key = 1 370
						key = 4 290
						key = 20 0.01
					}
				}
			}
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = orbitalThrust
				}
				DATA
				{
					PROPELLANT
					{
						name = LqdHydrogen
						ratio = 3
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 1
						DrawGauge = True
					}
					atmosphereCurve
					{
						key = 0 465
						key = 1 190
						key = 3.5 0.01
					}
				}
			}
		}
	}
}

// Fuel Cell
@PART[Mk33ProbeCore]:NEEDS[B9PartSwitch,CryoEngines,!ClassicStock]
{
	@description ^= :$: <br><color="green">This part can change its fuel cell mix.</color>
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = FuelSelect
		switcherDescription = Fuel Cell
		switcherDescriptionPlural = Fuel Cell Modes
		switchInFlight = True
		SUBTYPE
		{
			name = Kerolox
			title = Kerolox
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 1
			descriptionSummary = LiquidFuel + Oxidizer
			descriptionDetail = <b>Inputs = </b> 32.4 LF/hr + 39.6 OX/hr <br><b>Outputs = </b> 8 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Fuel Cell
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LiquidFuel
						Ratio = 0.009
					}
					INPUT_RESOURCE
					{
						ResourceName = Oxidizer
						Ratio = 0.011
					}
					OUTPUT_RESOURCE
					{
						ResourceName = ElectricCharge
						Ratio = 8
						DumpExcess = false
					}
				}
			}
		}
		SUBTYPE
		{
			name = Hydrolox
			title = Hydrolox
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 2
			descriptionSummary = LqdHydrogen + Oxidizer
			descriptionDetail = <b>Inputs = </b> 0.495 LH2/s + 0.033 OX/s <br><b>Outputs = </b> 24 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@descriptionDetail:NEEDS[TacLifeSupport|KerbalHealth|RationalResources] = <b>Inputs = </b> 0.495 LH2/s + 0.033 OX/s <br><b>Outputs = </b> 24 EC/s + 0.019 H2O/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Fuel Cell
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LqdHydrogen
						Ratio = 0.495
						FlowMode = STAGE_PRIORITY_FLOW
					}
					INPUT_RESOURCE
					{
						ResourceName = Oxidizer
						Ratio = 0.033
					}
					OUTPUT_RESOURCE
					{
						ResourceName = ElectricCharge
						Ratio = 24
						DumpExcess = false
					}
					OUTPUT_RESOURCE:NEEDS[TacLifeSupport|KerbalHealth|RationalResources]
					{
						ResourceName = Water
						Ratio = 0.0185613
						DumpExcess = true
					}
				}
			}
		}
	}
}

// RCS
@PART[Mk33*]:HAS[@MODULE[ModuleRCSFX]]:NEEDS[B9PartSwitch,CryoEngines,!ClassicStock]
{
	@description ^= :$: <br><color="green">This part can change its RCS fuel mix.</color>
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = RCS
		switcherDescription = RCS Mode
		switcherDescriptionPlural = RCS Modes
		switchInFlight = True
		SUBTYPE
		{
			name = Kerolox
			title = Kerolox
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 1
			descriptionSummary = LiquidFuel + Oxidizer
			descriptionDetail = <b>Isp:</b> 70 s ASL / 380 s Vac.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleRCSFX
				}
				DATA
				{
					PROPELLANT
					{
						name = LiquidFuel
						ratio = 0.45
						resourceFlowMode = STAGE_PRIORITY_FLOW
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 0.55
						resourceFlowMode = STAGE_PRIORITY_FLOW
					}
					atmosphereCurve
					{
						key = 0 380
						key = 1 70
						key = 5 0.001
					}
				}
			}
		}
		SUBTYPE
		{
			name = Hydrolox
			title = Hydrolox
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 2
			descriptionSummary = LqdHydrogen + Oxidizer
			descriptionDetail = <b>Isp:</b> 84 s ASL / 465 s Vac.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleRCSFX
					runningEffectName = running
				}
				DATA
				{
					PROPELLANT
					{
						name = LqdHydrogen
						ratio = 1.5
						resourceFlowMode = STAGE_PRIORITY_FLOW
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 0.1
						resourceFlowMode = STAGE_PRIORITY_FLOW
					}
					atmosphereCurve
					{
						key = 0 465
						key = 1 84
						key = 1.6 0.01 0 0
					}
				}
			}
		}
	}
}

// Preserve OmniStorage (with CRP) and prevent CryoTanks adding B9PS beside it

@PART[Mk33AftTank|Mk33FwdTank|Mk33Cockpit]:NEEDS[WildBlueTools,!ClassicStock]:AFTER[zzz_CryoTanks]
{
    %RESOURCE[LqdHydrogen]
	{
		%amount = 60750
		%maxAmount = 60750
	}
    %RESOURCE[Oxidizer]
	{
		%amount = 4050
		%maxAmount = 4050
	}
	@MODULE[WBIOmniStorage]
	{
		@DEFAULT_RESOURCE[LiquidFuel]
		{
			@name = LqdHydrogen
			@maxAmount = 60750
		}
		@DEFAULT_RESOURCE[Oxidizer]
		{
			@maxAmount = 4050
		}
	}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]] {}
}
@PART[Mk33MidTank]:NEEDS[WildBlueTools,!ClassicStock]:AFTER[zzz_CryoTanks]
{
    %RESOURCE[LqdHydrogen]
	{
		%amount = 115593.75
		%maxAmount = 115593.75
	}
	%RESOURCE[Oxidizer]
	{
		%amount = 7706.25
		%maxAmount = 7706.25
	}
	@MODULE[WBIOmniStorage]
	{
		@DEFAULT_RESOURCE[LiquidFuel]
		{
			@name = LqdHydrogen
			@maxAmount = 115593.75
		}
		@DEFAULT_RESOURCE[Oxidizer]
		{
			@maxAmount = 7706.25
		}
	}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]] {}
}
@PART[wbiMk33FuelModule]:NEEDS[WildBlueTools,!ClassicStock]:AFTER[zzz_CryoTanks]
{
    %RESOURCE[LqdHydrogen]
	{
		%amount = 11288.7
		%maxAmount = 11288.7
	}
	%RESOURCE[Oxidizer]
	{
		%amount = 752.6
		%maxAmount = 752.6
	}
	@MODULE[WBIOmniStorage]
	{
		@DEFAULT_RESOURCE[LiquidFuel]
		{
			@name = LqdHydrogen
			@maxAmount = 11288.7
		}
		@DEFAULT_RESOURCE[Oxidizer]
		{
			@maxAmount = 752.6
		}
	}
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]] {}
}


// Prevent dry mass change when using B9PS

@PART[Mk33FwdTank|Mk33Cockpit|Mk33AftTank]:HAS[@MODULE[ModuleB9PartSwitch]]:NEEDS[!WildBlueTools,!ClassicStock]:AFTER[zzz_CryoTanks]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
	{
		@SUBTYPE[LF/O]
		{
			@addedMass = -10.813
		}
		@SUBTYPE[LiquidFuel]
		{
			@addedMass = -10.813
		}
		@SUBTYPE[Oxidizer]
		{
			@addedMass = -10.813
		}
		@SUBTYPE[MO]
		{
			addedMass = -6.92
		}
		@SUBTYPE[LH2/O]
		{
			@tankType = MK33LH2O
			@addedMass = 0
		}
		@SUBTYPE[LH2]
		{
			@tankType = MK33LH2
			@addedMass = 0
		}
	}
}
@PART[Mk33MidTank]:HAS[@MODULE[ModuleB9PartSwitch]]:NEEDS[!WildBlueTools,!ClassicStock]:AFTER[zzz_CryoTanks]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
	{
		@SUBTYPE[LF/O]
		{
			@addedMass = -25.688
		}
		@SUBTYPE[LiquidFuel]
		{
			@addedMass = -25.688
		}
		@SUBTYPE[Oxidizer]
		{
			@addedMass = -25.688
		}
		@SUBTYPE[MO]
		{
			addedMass = -16.44
		}
		@SUBTYPE[LH2/O]
		{
			@tankType = MK33LH2O
			@addedMass = 0
		}
		@SUBTYPE[LH2]
		{
			@tankType = MK33LH2
			@addedMass = 0
		}
	}
}
@PART[wbiMk33FuelModule]:HAS[@MODULE[ModuleB9PartSwitch]]:NEEDS[!WildBlueTools,!ClassicStock]:AFTER[zzz_CryoTanks]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]]
	{
		@SUBTYPE[LF/O]
		{
			@addedMass = -1.413
		}
		@SUBTYPE[LiquidFuel]
		{
			@addedMass = -1.413
		}
		@SUBTYPE[Oxidizer]
		{
			@addedMass = -1.413
		}
		@SUBTYPE[MO]
		{
			addedMass = -0.904
		}
		@SUBTYPE[LH2/O]
		{
			@tankType = MK33LH2O
			@addedMass = 0
		}
		@SUBTYPE[LH2]
		{
			@tankType = MK33LH2
			@addedMass = 0
		}
	}
}


// Classic Stock Resources
// Prune unwanted B9 fuel switch
// Set stock fuel nodes but to PropLox
// Do this when Classic Stock mode active

@PART[Mk33AftTank|Mk33FwdTank|Mk33Cockpit]:NEEDS[ClassicStock]:AFTER[zzz_CryoTanks]
{
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]] {}
	@MODULE[ModuleCryoTank]
	{
		BOILOFFCONFIG
		{
			FuelName = Propellium
			// in % per hr
			BoiloffRate = 0.01
			CoolingCost = 0.05
		}
	}
	@MODULE[WBIOmniStorage]
	{
		OMNIRESOURCECOMBO
		{
			name = PropLox
			RESOURCE
			{
				name = Propellium
				ratio = 0.75
				maxAmountMultiplier = 1.75
			}

			RESOURCE
			{
				name = Oxidizer
				ratio = 0.25
				maxAmountMultiplier = 1.75
			}
		}

		@DEFAULT_RESOURCE[LiquidFuel]
		{
			@name = Propellium
			@maxAmount = 28350
		}
		@DEFAULT_RESOURCE[Oxidizer]
		{
			@maxAmount = 9450
		}
	}
	RESOURCE
	{
		name = Propellium
		amount = 28350
		maxAmount = 28350
	}
	RESOURCE
	{
		name = Oxidizer
		amount = 9450
		maxAmount = 9450
	}
}
@PART[Mk33MidTank]:NEEDS[ClassicStock]:AFTER[zzz_CryoTanks]
{
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]] {}
	@MODULE[ModuleCryoTank]
	{
		BOILOFFCONFIG
		{
			FuelName = Propellium
			// in % per hr
			BoiloffRate = 0.01
			CoolingCost = 0.1
		}
	}
	@MODULE[WBIOmniStorage]
	{
		OMNIRESOURCECOMBO
		{
			name = PropLox
			RESOURCE
			{
				name = Propellium
				ratio = 0.75
				maxAmountMultiplier = 1.75
			}

			RESOURCE
			{
				name = Oxidizer
				ratio = 0.25
				maxAmountMultiplier = 1.75
			}
		}

		@DEFAULT_RESOURCE[LiquidFuel]
		{
			@name = Propellium
			@maxAmount = 53943.8
		}
		@DEFAULT_RESOURCE[Oxidizer]
		{
			@maxAmount = 17981.3
		}
	}
	RESOURCE
	{
		name = Propellium
		amount = 53943.8
		maxAmount = 53943.8
	}
	RESOURCE
	{
		name = Oxidizer
		amount = 17981.3
		maxAmount = 17981.3
	}
}
@PART[wbiMk33FuelModule]:NEEDS[ClassicStock]:AFTER[zzz_CryoTanks]
{
	!MODULE[ModuleB9PartSwitch]:HAS[#moduleID[fuelSwitch]] {}
	@MODULE[ModuleCryoTank]
	{
		BOILOFFCONFIG
		{
			FuelName = Propellium
			// in % per hr
			BoiloffRate = 0.01
			CoolingCost = 0.05
		}
	}
	@MODULE[WBIOmniStorage]
	{
		OMNIRESOURCECOMBO
		{
			name = PropLox
			RESOURCE
			{
				name = Propellium
				ratio = 0.75
				maxAmountMultiplier = 1.75
			}

			RESOURCE
			{
				name = Oxidizer
				ratio = 0.25
				maxAmountMultiplier = 1.75
			}
		}
		@DEFAULT_RESOURCE[LiquidFuel]
		{
			@name = Propellium
			@maxAmount = 2966.25
		}
		@DEFAULT_RESOURCE[Oxidizer]
		{
			@maxAmount = 988.75
		}
	}
	RESOURCE
	{
		name = Propellium
		amount = 2966.25
		maxAmount = 2966.25
	}
	RESOURCE
	{
		name = Oxidizer
		amount = 988.75
		maxAmount = 988.75
	}
}


// Fuel switch for engine, fuel cells and RCS if Classic Stock

// RCS
@PART[Mk33*]:HAS[@MODULE[ModuleRCSFX]]:NEEDS[B9PartSwitch,ClassicStock]
{
	@description ^= :$: <br><color="green">This part can change its RCS fuel mix.</color>
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = RCS
		switcherDescription = RCS Mode
		switcherDescriptionPlural = RCS Modes
		switchInFlight = True
		SUBTYPE
		{
			name = Kerolox
			title = Kerolox
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 1
			descriptionSummary = LiquidFuel + Oxidizer
			descriptionDetail = <b>Isp:</b> 70 s ASL / 380 s Vac.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleRCSFX
				}
				DATA
				{
					PROPELLANT
					{
						name = LiquidFuel
						ratio = 0.45
						resourceFlowMode = STAGE_PRIORITY_FLOW
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 0.55
						resourceFlowMode = STAGE_PRIORITY_FLOW
					}
					atmosphereCurve
					{
						key = 0 380
						key = 1 70
						key = 5 0.001
					}
				}
			}
		}
		SUBTYPE
		{
			name = PropLox
			title = PropLox
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 2
			descriptionSummary = Propellium + Oxidizer
			descriptionDetail = <b>Isp:</b> 84 s ASL / 465 s Vac.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleRCSFX
					runningEffectName = running
				}
				DATA
				{
					PROPELLANT
					{
						name = Propellium
						ratio = 3
						resourceFlowMode = STAGE_PRIORITY_FLOW
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 1
						resourceFlowMode = STAGE_PRIORITY_FLOW
					}
					atmosphereCurve
					{
						key = 0 465
						key = 1 84
						key = 1.6 0.01 0 0
					}
				}
			}
		}
	}
}

// Engine
@PART[KR2200L]:NEEDS[B9PartSwitch,ClassicStock]
{
	@description ^= :$: <br><color="green">This part can change its fuel mix.</color>
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = Propellant
		switcherDescription = Fuel Mix
		switcherDescriptionPlural = Fuel Mixes
		switchInFlight = True
		SUBTYPE
		{
			name = Kerolox
			title = Kerolox
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 1
			descriptionSummary = LiquidFuel + Oxidizer
			descriptionDetail = <b>Standard Mode:</b> 2200 kN @ 340 s (Vac). <br><b>Orbital Mode:</b> 220 kN @ 380 s (Vac).
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = standardThrust
				}
				DATA
				{
					PROPELLANT
					{
						name = LiquidFuel
						ratio = 0.45
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 0.55
						DrawGauge = True
					}
					atmosphereCurve
					{
						key = 0 340 -50 -73.71224
						key = 1 290 -21.23404 -21.23404
						key = 5 230 -10.54119 -10.54119
						key = 10 170 -13.59091 -13.59091
						key = 20 0.001
					}
				}
			}
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = orbitalThrust
				}
				DATA
				{
					PROPELLANT
					{
						name = LiquidFuel
						ratio = 0.45
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 0.55
						DrawGauge = True
					}
					atmosphereCurve
					{
						key = 0 380
						key = 1 324
						key = 3 0.001
					}
				}
			}
		}
		SUBTYPE
		{
			name = PropLox
			title = PropLox
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 2
			descriptionSummary = Propellium + Oxidizer
			descriptionDetail = <b>Standard Mode:</b> 2200 kN @ 418 s (Vac). <br><b>Orbital Mode:</b> 220 kN @ 465 s (Vac).
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = standardThrust
				}
				DATA
				{
					maxThrust = 1500
					PROPELLANT
					{
						name = Propellium
						ratio = 3
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 1
						DrawGauge = True
					}
					atmosphereCurve
					{
						key = 0 455
						key = 1 388
						key = 4 290
						key = 20 0.01
					}
				}
			}
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					engineID = orbitalThrust
				}
				DATA
				{
					PROPELLANT
					{
						name = Propellium
						ratio = 3
						DrawGauge = True
					}
					PROPELLANT
					{
						name = Oxidizer
						ratio = 1
						DrawGauge = True
					}
					atmosphereCurve
					{
						key = 0 465
						key = 1 190
						key = 3.5 0.01
					}
				}
			}
		}
	}
}

// Fuel Cell
@PART[Mk33ProbeCore]:NEEDS[B9PartSwitch,ClassicStock]
{
	@description ^= :$: <br><color="green">This part can change its fuel cell mix.</color>
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = FuelSelect
		switcherDescription = Fuel Cell
		switcherDescriptionPlural = Fuel Cell Modes
		switchInFlight = True
		SUBTYPE
		{
			name = Kerolox
			title = Kerolox
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 1
			descriptionSummary = LiquidFuel + Oxidizer
			descriptionDetail = <b>Inputs = </b> 32.4 LF/hr + 39.6 OX/hr <br><b>Outputs = </b> 8 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Fuel Cell
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LiquidFuel
						Ratio = 0.009
					}
					INPUT_RESOURCE
					{
						ResourceName = Oxidizer
						Ratio = 0.011
					}
					OUTPUT_RESOURCE
					{
						ResourceName = ElectricCharge
						Ratio = 8
						DumpExcess = false
					}
				}
			}
		}
		SUBTYPE
		{
			name = PropLox
			title = PropLox
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			defaultSubtypePriority = 2
			descriptionSummary = Propellium + Oxidizer
			descriptionDetail = <b>Inputs = </b> 118.8 PLM/hr + 39.6 OX/hr <br><b>Outputs = </b> 8 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@descriptionDetail:NEEDS[TacLifeSupport|KerbalHealth|RationalResources] = <b>Inputs = </b> 118.8 PLM/hr + 39.6 OX/hr <br><b>Outputs = </b> 8 EC/s + 0.019 H2O/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Fuel Cell
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = Propellium
						Ratio = 0.033
						FlowMode = STAGE_PRIORITY_FLOW
					}
					INPUT_RESOURCE
					{
						ResourceName = Oxidizer
						Ratio = 0.011
					}
					OUTPUT_RESOURCE
					{
						ResourceName = ElectricCharge
						Ratio = 8
						DumpExcess = false
					}
					OUTPUT_RESOURCE:NEEDS[TacLifeSupport|KerbalHealth|RationalResources]
					{
						ResourceName = Water
						Ratio = 0.0061871
						DumpExcess = true
					}
				}
			}
		}
	}
}